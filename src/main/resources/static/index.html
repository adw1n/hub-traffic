<!DOCTYPE html>
<html lang="en">
<!-- HTML template taken from https://startbootstrap.com/template-overviews/freelancer/ licensed under the MIT license -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>hub-traffic</title>

    <!-- Bootstrap Core CSS -->
    <link href="js/node_modules/startbootstrap-freelancer/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="js/node_modules/startbootstrap-freelancer/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Theme CSS -->
    <link href="js/node_modules/startbootstrap-freelancer/css/freelancer.min.css" rel="stylesheet">

    <!-- Temporary navbar container fix until Bootstrap 4 is patched -->
    <style>
        .navbar-toggler {
            z-index: 1;
        }

        @media (max-width: 576px) {
            nav > .container {
                width: 100%;
            }
        }
    </style>

</head>

<!-- TODO place it in the header (on the green background on the right) -->
<a href="https://github.com/adw1n/hub-traffic"><img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png"></a>

<body id="page-top" class="index">

<!-- Navigation -->
<nav id="mainNav" class="navbar fixed-top navbar-toggleable-md navbar-light">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarExample" aria-controls="navbarExample" aria-expanded="false" aria-label="Toggle navigation">
        Menu <i class="fa fa-bars"></i>
    </button>
    <div class="container">
        <a class="navbar-brand page-scroll" href="#page-top">hub-traffic</a>
        <div class="collapse navbar-collapse" id="navbarExample">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="#demo">demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="/login">login</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Header -->
<header>
    <div class="container">
        <div class="intro-text">
            <span class="skills">Track your Github traffic with hub-traffic</span>
            <hr class="star-light" style="visibility: hidden">
            <span class="skills">Usage stats of all your repos in one place. Daily updated info about visitors and clones.</span>
            <hr style="visibility: hidden">
            <span class="skills">
                    Ready to start?
                </span>
            <p>
                <a href="/login">
                    <button class="btn btn-primary btn-lg">
                        <span>Login now with github!</span>
                    </button>
                </a>
            </p>
        </div>
    </div>
</header>

<section id="demo">
    <div class="container">
        <h2 class="text-center">DEMO</h2>
        <p>user: JohnDoe
            <!-- <hr class="star-primary"> -->
        <p>pinned repositories:
        <div class="row"> <!-- TODO make it collapsable -->
            <div class="col-lg-12"><h4>hub-traffic</h4></div>
            <div class="col-lg-6">
                <div id="Repo1-visits"></div>
            </div>
            <div class="col-lg-6">
                <div id="Repo1-clones"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12"><h4>audio-gallery</h4></div>
            <div class="col-lg-6">
                <div id="Repo2-visits"></div>
            </div>
            <div class="col-lg-6">
                <div id="Repo2-clones"></div>
            </div>
        </div>
    </div>
</section>




<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-top hidden-lg-up">
    <a class="btn btn-primary page-scroll" href="#page-top">
        <i class="fa fa-chevron-up"></i>
    </a>
</div>



<!-- jQuery Version 3.1.1 -->
<script src="js/node_modules/startbootstrap-freelancer/lib/jquery/jquery.js"></script>

<!-- Tether -->
<script src="js/node_modules/startbootstrap-freelancer/lib/tether/tether.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/node_modules/startbootstrap-freelancer/lib/bootstrap/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Theme JavaScript -->
<script src="js/node_modules/startbootstrap-freelancer/js/freelancer.min.js"></script>



<!-- <script>
    $.get( "/user", function( data ) {
        console.log(data);
    });
</script> -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script>

    var visits = {
        x: ["7/11", "7/12", "7/13", "7/14"],
        y: [12, 9, 15, 12],
        mode: 'lines+markers',
        marker: {
            color: 'blue',
            size: 8
        },
        line: {
            color: 'blue',
            width: 1
        },
        name: "visits"
    };
    var unique_visitors = {
        x: ["7/11", "7/12", "7/13", "7/14"],
        y: [2, 1, 4, 3],
        mode: 'lines+markers',
        marker: {
            color: 'green',
            size: 8
        },
        line: {
            color: 'green',
            width: 1
        },
        name: "unique visitors",
        yaxis: 'y2'
    };

    var data = [ visits, unique_visitors];

    var layout = {
        title: 'Visitors',
        yaxis: { //https://plot.ly/javascript/multiple-axes/
            side: 'left',
            color: 'green'
        },
        yaxis2: {
            overlaying: 'y',
            side: 'right',
            color: 'blue'
        }
    };

    Plotly.newPlot('Repo1-visits', data, layout);
    Plotly.newPlot('Repo2-visits', data, layout);
    //TODO summary under the chart





    var clones = {
        x: ["7/11", "7/12", "7/13", "7/14"],
        y: [0, 3, 0, 1],
        mode: 'lines+markers',
        marker: {
            color: 'blue',
            size: 8
        },
        line: {
            color: 'blue',
            width: 1
        },
        name: "clones"
    };
    var unique_cloners = {
        x: ["7/11", "7/12", "7/13", "7/14"],
        y: [0, 2, 0, 1],
        mode: 'lines+markers',
        marker: {
            color: 'green',
            size: 8
        },
        line: {
            color: 'green',
            width: 1
        },
        name: "unique cloners",
        yaxis: 'y2'
    };

    var data = [ clones, unique_cloners];

    var layout = {
        title: 'Git clones',
        yaxis: { //https://plot.ly/javascript/multiple-axes/
            side: 'left',
            color: 'green'
        },
        yaxis2: {
            overlaying: 'y',
            side: 'right',
            color: 'blue'
        }
    };

    Plotly.newPlot('Repo1-clones', data, layout);
    Plotly.newPlot('Repo2-clones', data, layout);
    function getRepo(repoName) {
        $.get("/api/repository/views/"+repoName, function (data) {
            console.log(data);
        })
    }
</script>


</body>

</html>
